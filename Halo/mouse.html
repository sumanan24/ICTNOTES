<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Practice - Master Your Skills</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Noto Sans Tamil', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .tamil-text {
            font-family: 'Noto Sans Tamil', sans-serif;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeInDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            font-weight: 700;
            background: linear-gradient(45deg, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.3em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        /* Language Selector */
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .lang-btn {
            padding: 10px 22px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 0.95em;
            min-width: 100px;
            min-height: 40px;
            box-sizing: border-box;
        }

        .lang-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .lang-btn:hover {
            transform: scale(1.05);
        }

        /* Difficulty Selector */
        .difficulty-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out;
        }

        .difficulty-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            text-align: center;
            border-top: 6px solid;
        }

        .difficulty-card.basic {
            border-top-color: #4CAF50;
        }

        .difficulty-card.medium {
            border-top-color: #FF9800;
        }

        .difficulty-card.hard {
            border-top-color: #f44336;
        }

        .difficulty-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.25);
        }

        .difficulty-card h3 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .difficulty-card.basic h3 {
            color: #4CAF50;
        }

        .difficulty-card.medium h3 {
            color: #FF9800;
        }

        .difficulty-card.hard h3 {
            color: #f44336;
        }

        .difficulty-card .time-limit {
            font-size: 1.2em;
            color: #666;
            margin-top: 10px;
        }

        /* Category Cards */
        .category-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
            animation: fadeInUp 1.4s ease-out;
        }

        .category-card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            text-align: center;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .category-card:hover::before {
            left: 100%;
        }

        .category-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        }

        .category-card.clicking {
            border-top: 6px solid #4CAF50;
        }

        .category-card.dragging {
            border-top: 6px solid #FF9800;
        }

        .category-card.precision {
            border-top: 6px solid #f44336;
        }

        .category-card.whack {
            border-top: 6px solid #9C27B0;
        }

        .category-card.matching {
            border-top: 6px solid #2196F3;
        }

        .category-card.scrolling {
            border-top: 6px solid #00BCD4;
        }

        .category-card.rightclick {
            border-top: 6px solid #E91E63;
        }

        .category-card.bubblepop {
            border-top: 6px solid #00BCD4;
        }

        .category-card.simpleclick {
            border-top: 6px solid #4CAF50;
        }

        .category-card.colorfill {
            border-top: 6px solid #FF9800;
        }

        .category-card.movingtargets {
            border-top: 6px solid #2196F3;
        }

        .category-card.doubleclick {
            border-top: 6px solid #9C27B0;
        }

        .category-card.shapematch {
            border-top: 6px solid #607D8B;
        }

        .category-card.multiclick {
            border-top: 6px solid #E91E63;
        }

        .category-card.fastmoving {
            border-top: 6px solid #F44336;
        }

        .category-card.precisionmaze {
            border-top: 6px solid #795548;
        }

        .category-card.knifethrow {
            border-top: 6px solid #F44336;
        }

        .category-card.needlethrow {
            border-top: 6px solid #9C27B0;
        }

        .knife-game-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .rotating-fruit {
            transition: all 0.3s;
            user-select: none;
        }

        .rotating-fruit:hover {
            transform: scale(1.1);
        }

        .thrown-knife {
            pointer-events: none;
            user-select: none;
        }

        @keyframes knifeShake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            75% { transform: translateX(5px) rotate(5deg); }
        }

        .category-card h2 {
            font-size: 2em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .category-card .icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        /* Practice Area */
        .practice-area {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            animation: fadeInUp 0.6s ease-out;
            min-height: 600px;
            position: relative;
        }

        .practice-area.active {
            display: block;
        }

        .practice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .timer-display {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 2em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
            animation: pulse 1s infinite;
        }

        .timer-display.warning {
            animation: pulse 0.5s infinite;
            background: linear-gradient(135deg, #ff5722 0%, #e64a19 100%);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Game Elements */
        .click-target {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            transition: all 0.2s;
            animation: targetPulse 1.5s infinite;
        }

        .click-target:hover {
            transform: scale(1.1);
        }

        .click-target.clicked {
            animation: clickAnimation 0.3s;
        }

        .click-target.moving {
            transition: all 0.3s ease-out;
        }

        @keyframes targetPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(76, 175, 80, 0.6); }
        }

        @keyframes clickAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(0.8); }
            100% { transform: scale(1); }
        }

        .whack-hole {
            width: 100px;
            height: 100px;
            background: #8B4513;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.3);
        }

        .whack-mole {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #795548 0%, #5D4037 100%);
            border-radius: 50%;
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            transition: bottom 0.3s;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
        }

        .whack-mole.up {
            bottom: 10px;
        }

        .whack-mole.hit {
            animation: moleHit 0.3s;
        }

        @keyframes moleHit {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { transform: translateX(-50%) scale(0); }
        }

        .drag-source {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            cursor: grab;
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.3);
            transition: all 0.3s;
        }

        .drag-source:active {
            cursor: grabbing;
        }

        .drag-source.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .drop-zone {
            background: #f5f5f5;
            border: 3px dashed #ccc;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            color: #999;
            font-weight: bold;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #2196F3;
            border-style: solid;
        }

        .drop-zone.filled {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-color: #4CAF50;
            color: white;
        }

        .precision-target {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            border-radius: 50%;
            cursor: crosshair;
            box-shadow: 0 3px 10px rgba(244, 67, 54, 0.4);
            transition: all 0.1s;
        }

        .precision-target:hover {
            transform: scale(1.2);
        }

        .precision-target.hit {
            animation: hitAnimation 0.4s;
        }

        @keyframes hitAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); opacity: 0.7; }
            100% { transform: scale(0); opacity: 0; }
        }

        .match-card {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            color: white;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .match-card.flipped {
            background: #2196F3 !important;
        }

        .match-card.matched {
            opacity: 0.5;
            cursor: default;
        }

        /* Scroll Practice */
        .scroll-container {
            height: 100%;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(180deg, #e3f2fd 0%, #fff 50%, #e3f2fd 100%);
        }

        .scroll-item {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 30px;
            margin: 20px 0;
            border-radius: 15px;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scroll-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 100;
        }

        /* Right Click Practice */
        .rightclick-target {
            position: absolute;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
            transition: all 0.2s;
            animation: rightclickPulse 2s infinite;
        }

        .rightclick-target:hover {
            transform: scale(1.1);
        }

        .rightclick-target.clicked {
            animation: rightclickAnimation 0.3s;
        }

        @keyframes rightclickPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 8px 25px rgba(233, 30, 99, 0.6); }
        }

        @keyframes rightclickAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        .context-menu {
            position: absolute;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            padding: 10px 0;
            min-width: 150px;
            z-index: 1000;
            display: none;
        }

        .context-menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .context-menu-item:hover {
            background: #f5f5f5;
        }

        /* Buttons */
        .btn {
            padding: 14px 35px;
            font-size: 1.05em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            min-width: 120px;
            min-height: 48px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-sizing: border-box;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #757575 0%, #616161 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .back-btn {
            margin-bottom: 20px;
            padding: 12px 28px;
            background: linear-gradient(135deg, #757575 0%, #616161 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            text-align: center;
            display: inline-block;
            min-width: 180px;
            min-height: 44px;
            box-sizing: border-box;
        }

        .back-btn:hover {
            transform: translateX(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .instructions {
            background: linear-gradient(135deg, #fff3cd 0%, #ffe69c 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #ffc107;
            text-align: center;
            font-size: 1.1em;
            color: #856404;
            font-weight: bold;
        }

        .game-area {
            position: relative;
            width: 100%;
            height: 500px;
            background: #f8f9fa;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #e0e0e0;
        }

        .whack-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 30px;
            height: 100%;
        }

        .match-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding: 20px;
            height: 100%;
        }

        /* Basic Games Styles */
        .bubble {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: bubbleFloat 3s infinite;
            transition: all 0.2s;
        }

        .bubble:hover {
            transform: scale(1.2);
        }

        .bubble.popped {
            animation: bubblePop 0.4s;
        }

        @keyframes bubbleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes bubblePop {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .simple-target {
            position: absolute;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 2em;
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
            animation: simplePulse 2s infinite;
        }

        @keyframes simplePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes clickAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        @keyframes hitAnimation {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }

        .color-shape {
            width: 120px;
            height: 120px;
            border: 4px solid #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            transition: all 0.3s;
            margin: 10px;
        }

        .color-shape.filled {
            border-color: transparent;
            transform: scale(1.1);
        }

        /* Medium Games Styles */
        .moving-target {
            position: absolute;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.5em;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
            transition: all 0.1s linear;
        }

        .doubleclick-target {
            position: absolute;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.8em;
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
            animation: doubleclickPulse 1.5s infinite;
        }

        @keyframes doubleclickPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .shape-card {
            width: 100px;
            height: 100px;
            border: 3px solid #333;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            transition: all 0.3s;
            background: white;
        }

        .shape-card.selected {
            border-color: #2196F3;
            border-width: 5px;
            transform: scale(1.1);
        }

        .shape-card.matched {
            opacity: 0.5;
            cursor: default;
            border-color: #4CAF50;
        }

        /* Hard Games Styles */
        .multiclick-target {
            position: absolute;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #E91E63 0%, #C2185B 100%);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(233, 30, 99, 0.4);
            animation: multiclickFlash 0.8s infinite;
        }

        @keyframes multiclickFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .fast-moving-target {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #F44336 0%, #D32F2F 100%);
            border-radius: 50%;
            cursor: crosshair;
            box-shadow: 0 3px 10px rgba(244, 67, 54, 0.4);
            transition: all 0.05s linear;
        }

        .maze-container {
            position: relative;
            width: 100%;
            height: 100%;
            background: #f5f5f5;
            border: 3px solid #333;
        }

        .maze-path {
            position: absolute;
            background: #4CAF50;
            border-radius: 5px;
        }

        .maze-wall {
            position: absolute;
            background: #333;
        }

        .maze-cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #2196F3;
            border-radius: 50%;
            border: 2px solid white;
            pointer-events: none;
            z-index: 100;
            transition: all 0.1s;
        }

        .maze-start {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #4CAF50;
            border-radius: 50%;
            border: 3px solid white;
            z-index: 10;
        }

        .maze-end {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #F44336;
            border-radius: 50%;
            border: 3px solid white;
            z-index: 10;
        }

        /* Hard Games Styles */
        .knife-target {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #fff 0%, #ddd 100%);
            border-radius: 50%;
            border: 5px solid #f44336;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            cursor: crosshair;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }

        .knife-target.hit {
            animation: targetHit 0.5s;
        }

        @keyframes targetHit {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(180deg); }
            100% { transform: scale(0) rotate(360deg); }
        }

        .knife {
            position: absolute;
            width: 40px;
            height: 40px;
            font-size: 2em;
            z-index: 100;
            pointer-events: none;
        }

        .needle-target {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #f44336;
            border-radius: 50%;
            border: 3px solid #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 1.5em;
            cursor: crosshair;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        .needle-target.hit {
            animation: needleHit 0.3s;
        }

        @keyframes needleHit {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); }
            100% { transform: scale(0); }
        }

        .needle {
            position: absolute;
            width: 20px;
            height: 20px;
            font-size: 1.2em;
            z-index: 100;
            pointer-events: none;
        }

        .carrom-board {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            border-radius: 20px;
            border: 10px solid #654321;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.3);
        }

        .carrom-pocket {
            box-shadow: inset 0 0 15px rgba(0,0,0,0.9);
            border: 3px solid #333;
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
        }

        .carrom-striker {
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            border: 4px solid #333;
            cursor: grab;
            transition: transform 0.1s;
        }

        .carrom-striker:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .carrom-striker.aiming {
            box-shadow: 0 0 20px rgba(255,255,255,0.6);
            animation: strikerPulse 1s infinite;
        }

        @keyframes strikerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .carrom-piece {
            box-shadow: 0 3px 10px rgba(0,0,0,0.4);
            border: 3px solid #333;
            transition: all 0.3s;
        }

        .carrom-piece:hover {
            transform: scale(1.15);
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .aim-line {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 100%);
            transform-origin: left center;
            pointer-events: none;
            z-index: 5;
            box-shadow: 0 0 5px rgba(255,255,255,0.5);
        }

        .aim-arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid rgba(255,255,255,0.9);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            pointer-events: none;
            z-index: 6;
            filter: drop-shadow(0 0 3px rgba(255,255,255,0.8));
        }

        .power-indicator {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 1.1em;
            z-index: 20;
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .power-indicator.active {
            display: block;
        }

        .power-bar {
            width: 200px;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }

        .power-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50 0%, #FFC107 50%, #F44336 100%);
            border-radius: 5px;
            transition: width 0.1s;
            width: 0%;
        }

        .carrom-instruction {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1em;
            z-index: 15;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
            animation: fadeInDown 0.5s;
        }

        .shots-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            z-index: 15;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
        }

        /* Result Modal */
        .result-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .result-modal.active {
            display: flex;
        }

        .result-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: scaleIn 0.3s ease-out;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .result-content h2 {
            margin-bottom: 25px;
            color: #667eea;
            font-size: 2.5em;
        }

        .result-stats {
            margin: 25px 0;
            font-size: 1.2em;
        }

        .result-stats div {
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .category-selector, .difficulty-selector {
                grid-template-columns: 1fr;
            }

            .game-area {
                height: 400px;
            }

            .click-target {
                width: 60px;
                height: 60px;
                font-size: 1.2em;
            }

            .precision-target {
                width: 30px;
                height: 30px;
            }

            .whack-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .match-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <button class="lang-btn" onclick="setLanguage('en')" id="langEn">English</button>
        <button class="lang-btn active" onclick="setLanguage('ta')" id="langTa">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
    </div>

    <div class="container">
        <div class="header">
            <h1 id="headerTitle">üñ±Ô∏è Mouse Master</h1>
            <p id="headerSubtitle">Master your mouse skills with timed challenges</p>
        </div>

        <!-- Difficulty Selector -->
        <div id="difficultySelector" class="difficulty-selector">
            <div class="difficulty-card basic" onclick="selectDifficulty('basic')">
                <h3 id="basicTitle">üå± Basic</h3>
                <p id="basicDesc">Easy challenges for beginners</p>
                <div class="time-limit" id="basicTime">60 seconds</div>
            </div>
            <div class="difficulty-card medium" onclick="selectDifficulty('medium')">
                <h3 id="mediumTitle">‚ö° Medium</h3>
                <p id="mediumDesc">Moderate challenges</p>
                <div class="time-limit" id="mediumTime">45 seconds</div>
            </div>
            <div class="difficulty-card hard" onclick="selectDifficulty('hard')">
                <h3 id="hardTitle">üî• Hard</h3>
                <p id="hardDesc">Advanced challenges</p>
                <div class="time-limit" id="hardTime">30 seconds</div>
            </div>
        </div>

        <!-- Category Selector - Different games for each difficulty -->
        <div id="categorySelector" class="category-selector" style="display: none;">
            <!-- Games will be dynamically loaded based on difficulty -->
        </div>

        <!-- Practice Area -->
        <div id="practiceArea" class="practice-area">
            <button class="back-btn" onclick="goBack()" id="backBtn">‚Üê Back</button>
            
            <div class="practice-header">
                <div class="instructions" id="instructions"></div>
                <div class="timer-display" id="timerDisplay">60</div>
            </div>

            <div class="stats-bar">
                <div class="stat-box">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label" id="scoreLabel">Score</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="hits">0</div>
                    <div class="stat-label" id="hitsLabel">Hits</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="accuracy">100%</div>
                    <div class="stat-label" id="accuracyLabel">Accuracy</div>
                </div>
            </div>

            <div class="game-area" id="gameArea"></div>

            <div class="controls">
                <button class="btn btn-primary" onclick="resetPractice()" id="resetBtn">üîÑ Reset</button>
                <button class="btn btn-secondary" onclick="pausePractice()" id="pauseBtn">‚è∏Ô∏è Pause</button>
            </div>
        </div>

        <!-- Result Modal -->
        <div id="resultModal" class="result-modal">
            <div class="result-content">
                <h2 id="resultTitle">üéâ Time's Up!</h2>
                <div class="result-stats" id="resultStats"></div>
                <button class="btn btn-success" onclick="closeResultModal()" id="continueBtn">Continue</button>
            </div>
        </div>
    </div>

    <script>
        // Language state - Default to Tamil
        let currentLanguage = localStorage.getItem('mouseLanguage') || 'ta';

        // Game configuration by difficulty - Each difficulty has unique games
        const gameConfig = {
            basic: {
                timeLimit: 60,
                games: {
                    bubblepop: { bubbles: 20, spawnRate: 2000, points: 10 },
                    simpleclick: { targets: 15, targetSize: 100, spawnRate: 2500, points: 15 },
                    colorfill: { shapes: 12, points: 20 }
                }
            },
            medium: {
                timeLimit: 45,
                games: {
                    movingtargets: { targets: 20, speed: 2, points: 20 },
                    doubleclick: { targets: 15, spawnRate: 2000, points: 25 },
                    shapematch: { pairs: 8, points: 30 }
                }
            },
            hard: {
                timeLimit: 30,
                games: {
                    knifethrow: { fruits: 8, rotationSpeed: 2, points: 40 },
                    needlethrow: { targets: 20, spawnRate: 1200, points: 35 }
                }
            }
        };

        // Translations
        const translations = {
            en: {
                headerTitle: "üñ±Ô∏è Mouse Master",
                headerSubtitle: "Master your mouse skills with timed challenges",
                basicTitle: "üå± Basic",
                basicDesc: "Easy challenges for beginners",
                basicTime: "60 seconds",
                mediumTitle: "‚ö° Medium",
                mediumDesc: "Moderate challenges",
                mediumTime: "45 seconds",
                hardTitle: "üî• Hard",
                hardDesc: "Advanced challenges",
                hardTime: "30 seconds",
                // Basic Games
                bubblepopTitle: "Bubble Pop",
                bubblepopDesc: "Pop colorful bubbles!",
                simpleclickTitle: "Simple Click",
                simpleclickDesc: "Click the big circles",
                colorfillTitle: "Color Fill",
                colorfillDesc: "Fill shapes with colors",
                // Medium Games
                movingtargetsTitle: "Moving Targets",
                movingtargetsDesc: "Click targets that move!",
                doubleclickTitle: "Double Click",
                doubleclickDesc: "Double-click to score",
                shapematchTitle: "Shape Match",
                shapematchDesc: "Match shapes by clicking",
                // Hard Games
                knifethrowTitle: "Knife Throw",
                knifethrowDesc: "Cut rotating fruits with knives!",
                needlethrowTitle: "Needle Throw",
                needlethrowDesc: "Precise needle throwing",
                backBtn: "‚Üê Back",
                scoreLabel: "Score",
                hitsLabel: "Hits",
                accuracyLabel: "Accuracy",
                resetBtn: "üîÑ Reset",
                pauseBtn: "‚è∏Ô∏è Pause",
                resumeBtn: "‚ñ∂Ô∏è Resume",
                continueBtn: "Continue",
                // Basic Instructions
                bubblepopInstructions: "Click bubbles to pop them!",
                simpleclickInstructions: "Click the circles as they appear!",
                colorfillInstructions: "Click shapes to fill them with colors!",
                // Medium Instructions
                movingtargetsInstructions: "Click the moving targets before they disappear!",
                doubleclickInstructions: "Double-click targets quickly!",
                shapematchInstructions: "Click matching shapes to pair them!",
                // Hard Instructions
                knifethrowInstructions: "Click to throw knives and cut rotating fruits! Don't let knives overlap!",
                needlethrowInstructions: "Click precisely to throw needles at small targets!",
                timesUp: "‚è∞ Time's Up!",
                finalScore: "Final Score:",
                finalHits: "Total Hits:",
                finalAccuracy: "Accuracy:"
            },
            ta: {
                headerTitle: "üñ±Ô∏è ‡Æö‡ØÅ‡Æü‡Øç‡Æü‡Æø ‡ÆÆ‡Ææ‡Æ∏‡Øç‡Æü‡Æ∞‡Øç",
                headerSubtitle: "‡Æï‡Ææ‡Æ≤ ‡Æµ‡Æ∞‡ÆÆ‡Øç‡Æ™‡ØÅ‡Æü‡Æ©‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æö‡ØÅ‡Æü‡Øç‡Æü‡Æø ‡Æ§‡Æø‡Æ±‡Æ©‡Øç‡Æï‡Æ≥‡Øà ‡ÆÆ‡Ææ‡Æ∏‡Øç‡Æü‡Æ∞‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                basicTitle: "üå± ‡ÆÖ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øà",
                basicDesc: "‡Æ§‡Øä‡Æü‡Æï‡Øç‡Æï‡Æ®‡Æø‡Æ≤‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ≥‡Æø‡Æ§‡Ææ‡Æ© ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç",
                basicTime: "60 ‡Æµ‡Æø‡Æ©‡Ææ‡Æü‡Æø‡Æï‡Æ≥‡Øç",
                mediumTitle: "‚ö° ‡Æ®‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ∞‡ÆÆ‡Øç",
                mediumDesc: "‡ÆÆ‡Æø‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç",
                mediumTime: "45 ‡Æµ‡Æø‡Æ©‡Ææ‡Æü‡Æø‡Æï‡Æ≥‡Øç",
                hardTitle: "üî• ‡Æï‡Æü‡Æø‡Æ©‡ÆÆ‡Øç",
                hardDesc: "‡ÆÆ‡Øá‡ÆÆ‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æö‡Æµ‡Ææ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç",
                hardTime: "30 ‡Æµ‡Æø‡Æ©‡Ææ‡Æü‡Æø‡Æï‡Æ≥‡Øç",
                // Basic Games
                bubblepopTitle: "‡Æï‡ØÅ‡ÆÆ‡Æø‡Æ¥‡Æø ‡Æµ‡ØÜ‡Æü‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",
                bubblepopDesc: "‡Æµ‡Æ£‡Øç‡Æ£‡ÆÆ‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æï‡ØÅ‡ÆÆ‡Æø‡Æ¥‡Æø‡Æï‡Æ≥‡Øà ‡Æµ‡ØÜ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç!",
                simpleclickTitle: "‡Æé‡Æ≥‡Æø‡ÆØ ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç",
                simpleclickDesc: "‡Æ™‡ØÜ‡Æ∞‡Æø‡ÆØ ‡Æµ‡Æü‡Øç‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                colorfillTitle: "‡Æ®‡Æø‡Æ± ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æ§‡Æ≤‡Øç",
                colorfillDesc: "‡Æµ‡Æü‡Æø‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æ®‡Æø‡Æ±‡Æô‡Øç‡Æï‡Æ≥‡Ææ‡Æ≤‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                // Medium Games
                movingtargetsTitle: "‡Æ®‡Æï‡Æ∞‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øç",
                movingtargetsDesc: "‡Æ®‡Æï‡Æ∞‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                doubleclickTitle: "‡Æá‡Æ∞‡Æü‡Øç‡Æü‡Øà ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç",
                doubleclickDesc: "‡Æá‡Æ∞‡Æü‡Øç‡Æü‡Øà ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÜ‡Æ£‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                shapematchTitle: "‡Æµ‡Æü‡Æø‡Æµ ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ§‡Øç‡Æ§‡ÆÆ‡Øç",
                shapematchDesc: "‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æü‡Æø‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                // Hard Games
                knifethrowTitle: "‡Æï‡Æ§‡Øç‡Æ§‡Æø ‡Æé‡Æ±‡Æø‡Æ§‡Æ≤‡Øç",
                knifethrowDesc: "‡Æö‡ØÅ‡Æ¥‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æï‡Æ≥‡Ææ‡Æ≤‡Øç ‡Æµ‡ØÜ‡Æü‡Øç‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                needlethrowTitle: "‡Æä‡Æö‡Æø ‡Æé‡Æ±‡Æø‡Æ§‡Æ≤‡Øç",
                needlethrowDesc: "‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æä‡Æö‡Æø ‡Æé‡Æ±‡Æø‡Æ§‡Æ≤‡Øç",
                backBtn: "‚Üê ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡ØÅ",
                scoreLabel: "‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÜ‡Æ£‡Øç",
                hitsLabel: "‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ≥‡Øç",
                accuracyLabel: "‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Øç",
                resetBtn: "üîÑ ‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
                pauseBtn: "‚è∏Ô∏è ‡Æá‡Æü‡Øà‡Æ®‡Æø‡Æ±‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ",
                resumeBtn: "‚ñ∂Ô∏è ‡Æ§‡Øä‡Æü‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç",
                continueBtn: "‡Æ§‡Øä‡Æü‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç",
                // Basic Instructions
                bubblepopInstructions: "‡Æï‡ØÅ‡ÆÆ‡Æø‡Æ¥‡Æø‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æµ‡ØÜ‡Æü‡Æø‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç!",
                simpleclickInstructions: "‡Æµ‡Æü‡Øç‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ§‡Øã‡Æ©‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡ÆÖ‡Æµ‡Æ±‡Øç‡Æ±‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                colorfillInstructions: "‡Æµ‡Æü‡Æø‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ ‡Æ®‡Æø‡Æ±‡Æô‡Øç‡Æï‡Æ≥‡Ææ‡Æ≤‡Øç ‡Æ®‡Æø‡Æ∞‡Æ™‡Øç‡Æ™‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                // Medium Instructions
                movingtargetsInstructions: "‡ÆÖ‡Æµ‡Øà ‡ÆÆ‡Æ±‡Øà‡Æµ‡Æ§‡Æ±‡Øç‡Æï‡ØÅ ‡ÆÆ‡ØÅ‡Æ©‡Øç ‡Æ®‡Æï‡Æ∞‡ØÅ‡ÆÆ‡Øç ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                doubleclickInstructions: "‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Øà ‡Æµ‡Æø‡Æ∞‡Øà‡Æµ‡Ææ‡Æï ‡Æá‡Æ∞‡Æü‡Øç‡Æü‡Øà ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                shapematchInstructions: "‡Æ™‡Øä‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æü‡Æø‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æá‡Æ£‡Øà‡Æï‡Øç‡Æï ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                // Hard Instructions
                knifethrowInstructions: "‡Æö‡ØÅ‡Æ¥‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡ØÜ‡Æü‡Øç‡Æü ‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æï‡Æ≥‡Øà ‡Æé‡Æ±‡Æø‡ÆØ ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç! ‡Æï‡Æ§‡Øç‡Æ§‡Æø‡Æï‡Æ≥‡Øç ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ‡Æü‡Æ©‡Øç ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ ‡ÆÆ‡Øã‡Æ§‡Æï‡Øç‡Æï‡ØÇ‡Æü‡Ææ‡Æ§‡ØÅ!",
                needlethrowInstructions: "‡Æö‡Æø‡Æ±‡Æø‡ÆØ ‡Æá‡Æ≤‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æä‡Æö‡Æø‡Æï‡Æ≥‡Øà ‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Ææ‡Æï ‡Æé‡Æ±‡Æø‡ÆØ ‡Æï‡Æø‡Æ≥‡Æø‡Æï‡Øç ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!",
                timesUp: "‚è∞ ‡Æ®‡Øá‡Æ∞‡ÆÆ‡Øç ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ!",
                finalScore: "‡Æá‡Æ±‡ØÅ‡Æ§‡Æø ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡ØÜ‡Æ£‡Øç:",
                finalHits: "‡ÆÆ‡Øä‡Æ§‡Øç‡Æ§ ‡Æµ‡ØÜ‡Æ±‡Øç‡Æ±‡Æø‡Æï‡Æ≥‡Øç:",
                finalAccuracy: "‡Æ§‡ØÅ‡Æ≤‡Øç‡Æ≤‡Æø‡ÆØ‡ÆÆ‡Øç:"
            }
        };

        // Game state
        let currentDifficulty = null;
        let currentPractice = null;
        let score = 0;
        let hits = 0;
        let misses = 0;
        let timeRemaining = 0;
        let timerInterval = null;
        let gameInterval = null;
        let isPaused = false;
        let config = null;
        let flippedCards = [];
        let matchedPairs = 0;
        let targetCount = 0;
        let movingTargets = [];
        let doubleClickTimeout = null;
        let lastClickTime = 0;
        let selectedShapes = [];
        let multiClickSequence = [];
        let mazeCursor = null;
        let mazeCompleted = false;

        // Language functions
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('mouseLanguage', lang);
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang' + (lang === 'en' ? 'En' : 'Ta')).classList.add('active');
            updateLanguage();
        }

        function updateLanguage() {
            const t = translations[currentLanguage];
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('headerSubtitle').textContent = t.headerSubtitle;
            document.getElementById('basicTitle').textContent = t.basicTitle;
            document.getElementById('basicDesc').textContent = t.basicDesc;
            document.getElementById('basicTime').textContent = t.basicTime;
            document.getElementById('mediumTitle').textContent = t.mediumTitle;
            document.getElementById('mediumDesc').textContent = t.mediumDesc;
            document.getElementById('mediumTime').textContent = t.mediumTime;
            document.getElementById('hardTitle').textContent = t.hardTitle;
            document.getElementById('hardDesc').textContent = t.hardDesc;
            document.getElementById('hardTime').textContent = t.hardTime;
            
            // Reload games if difficulty is already selected
            if (currentDifficulty) {
                loadGamesForDifficulty(currentDifficulty);
            }
            
            document.getElementById('backBtn').textContent = t.backBtn;
            document.getElementById('scoreLabel').textContent = t.scoreLabel;
            document.getElementById('hitsLabel').textContent = t.hitsLabel;
            document.getElementById('accuracyLabel').textContent = t.accuracyLabel;
            document.getElementById('resetBtn').textContent = t.resetBtn;
            document.getElementById('pauseBtn').textContent = t.pauseBtn;
            document.getElementById('continueBtn').textContent = t.continueBtn;
        }

        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            config = gameConfig[difficulty];
            document.getElementById('difficultySelector').style.display = 'none';
            loadGamesForDifficulty(difficulty);
            document.getElementById('categorySelector').style.display = 'grid';
        }

        function loadGamesForDifficulty(difficulty) {
            const categorySelector = document.getElementById('categorySelector');
            categorySelector.innerHTML = '';
            const t = translations[currentLanguage];
            
            if (difficulty === 'basic') {
                // Basic Games
                categorySelector.innerHTML = `
                    <div class="category-card bubblepop" onclick="startPractice('bubblepop')">
                        <div class="icon">ü´ß</div>
                        <h2>${t.bubblepopTitle}</h2>
                        <p>${t.bubblepopDesc}</p>
                    </div>
                    <div class="category-card simpleclick" onclick="startPractice('simpleclick')">
                        <div class="icon">üëÜ</div>
                        <h2>${t.simpleclickTitle}</h2>
                        <p>${t.simpleclickDesc}</p>
                    </div>
                    <div class="category-card colorfill" onclick="startPractice('colorfill')">
                        <div class="icon">üé®</div>
                        <h2>${t.colorfillTitle}</h2>
                        <p>${t.colorfillDesc}</p>
                    </div>
                `;
            } else if (difficulty === 'medium') {
                // Medium Games
                categorySelector.innerHTML = `
                    <div class="category-card movingtargets" onclick="startPractice('movingtargets')">
                        <div class="icon">üéØ</div>
                        <h2>${t.movingtargetsTitle}</h2>
                        <p>${t.movingtargetsDesc}</p>
                    </div>
                    <div class="category-card doubleclick" onclick="startPractice('doubleclick')">
                        <div class="icon">üëÜüëÜ</div>
                        <h2>${t.doubleclickTitle}</h2>
                        <p>${t.doubleclickDesc}</p>
                    </div>
                    <div class="category-card shapematch" onclick="startPractice('shapematch')">
                        <div class="icon">üî∑</div>
                        <h2>${t.shapematchTitle}</h2>
                        <p>${t.shapematchDesc}</p>
                    </div>
                `;
            } else if (difficulty === 'hard') {
                // Hard Games
                categorySelector.innerHTML = `
                    <div class="category-card knifethrow" onclick="startPractice('knifethrow')">
                        <div class="icon">üî™</div>
                        <h2>${t.knifethrowTitle}</h2>
                        <p>${t.knifethrowDesc}</p>
                    </div>
                    <div class="category-card needlethrow" onclick="startPractice('needlethrow')">
                        <div class="icon">üìå</div>
                        <h2>${t.needlethrowTitle}</h2>
                        <p>${t.needlethrowDesc}</p>
                    </div>
                `;
            }
        }

        function startPractice(type) {
            currentPractice = type;
            document.getElementById('categorySelector').style.display = 'none';
            document.getElementById('practiceArea').classList.add('active');
            resetPractice();
            setupPractice(type);
            startGame();
        }

        function setupPractice(type) {
            const t = translations[currentLanguage];
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';

            // Basic Games
            if (type === 'bubblepop') {
                document.getElementById('instructions').textContent = t.bubblepopInstructions;
                setupBubblePop();
            } else if (type === 'simpleclick') {
                document.getElementById('instructions').textContent = t.simpleclickInstructions;
                setupSimpleClick();
            } else if (type === 'colorfill') {
                document.getElementById('instructions').textContent = t.colorfillInstructions;
                setupColorFill();
            }
            // Medium Games
            else if (type === 'movingtargets') {
                document.getElementById('instructions').textContent = t.movingtargetsInstructions;
                setupMovingTargets();
            } else if (type === 'doubleclick') {
                document.getElementById('instructions').textContent = t.doubleclickInstructions;
                setupDoubleClick();
            } else if (type === 'shapematch') {
                document.getElementById('instructions').textContent = t.shapematchInstructions;
                setupShapeMatch();
            }
            // Hard Games
            else if (type === 'knifethrow') {
                document.getElementById('instructions').textContent = t.knifethrowInstructions;
                setupKnifeThrow();
            } else if (type === 'needlethrow') {
                document.getElementById('instructions').textContent = t.needlethrowInstructions;
                setupNeedleThrow();
            }
        }

        function startGame() {
            timeRemaining = config.timeLimit;
            updateTimer();
            startTimer();
            
            const gameType = config.games[currentPractice];
            if (!gameType) return;
            
            // Basic Games
            if (currentPractice === 'bubblepop') {
                createBubble();
                gameInterval = setInterval(() => {
                    if (!isPaused && timeRemaining > 0) {
                        createBubble();
                    }
                }, gameType.spawnRate);
            } else if (currentPractice === 'simpleclick') {
                createSimpleTarget();
                gameInterval = setInterval(() => {
                    if (!isPaused && timeRemaining > 0 && targetCount < gameType.targets) {
                        createSimpleTarget();
                    }
                }, gameType.spawnRate);
            }
            // Medium Games
            else if (currentPractice === 'movingtargets') {
                createMovingTarget();
                gameInterval = setInterval(() => {
                    if (!isPaused && timeRemaining > 0) {
                        createMovingTarget();
                    }
                }, 1500);
            } else if (currentPractice === 'doubleclick') {
                createDoubleClickTarget();
                gameInterval = setInterval(() => {
                    if (!isPaused && timeRemaining > 0) {
                        createDoubleClickTarget();
                    }
                }, gameType.spawnRate);
            }
            // Hard Games
            else if (currentPractice === 'knifethrow') {
                // Game starts automatically - fruits rotate continuously
            } else if (currentPractice === 'needlethrow') {
                createNeedleTarget();
                gameInterval = setInterval(() => {
                    if (!isPaused && timeRemaining > 0) {
                        createNeedleTarget();
                    }
                }, gameType.spawnRate);
            }
        }

        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                if (!isPaused && timeRemaining > 0) {
                    timeRemaining--;
                    updateTimer();
                    
                    if (timeRemaining <= 10) {
                        document.getElementById('timerDisplay').classList.add('warning');
                    }
                    
                    if (timeRemaining <= 0) {
                        endGame();
                    }
                }
            }, 1000);
        }

        function updateTimer() {
            document.getElementById('timerDisplay').textContent = timeRemaining;
        }

        function createClickTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'click-target';
            target.style.width = config.clicking.targetSize + 'px';
            target.style.height = config.clicking.targetSize + 'px';
            
            const maxX = gameArea.offsetWidth - config.clicking.targetSize;
            const maxY = gameArea.offsetHeight - config.clicking.targetSize;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            target.addEventListener('click', function() {
                this.classList.add('clicked');
                hits++;
                score += config.clicking.points;
                updateStats();
                
                setTimeout(() => this.remove(), 300);
            });
            
            gameArea.appendChild(target);
            
            // Auto-remove after 3 seconds if not clicked
            setTimeout(() => {
                if (target.parentNode) {
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 3000);
        }

        function createPrecisionTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'precision-target';
            target.style.width = config.precision.targetSize + 'px';
            target.style.height = config.precision.targetSize + 'px';
            
            const maxX = gameArea.offsetWidth - config.precision.targetSize;
            const maxY = gameArea.offsetHeight - config.precision.targetSize;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            target.addEventListener('click', function() {
                this.classList.add('hit');
                hits++;
                score += config.precision.points;
                updateStats();
                
                setTimeout(() => this.remove(), 400);
            });
            
            gameArea.appendChild(target);
            
            setTimeout(() => {
                if (target.parentNode) {
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 2000);
        }

        function setupDragDrop() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const container = document.createElement('div');
            container.style.display = 'grid';
            container.style.gridTemplateColumns = 'repeat(3, 1fr)';
            container.style.gap = '20px';
            container.style.padding = '20px';
            container.style.height = '100%';
            
            for (let i = 1; i <= config.dragging.items; i++) {
                const source = document.createElement('div');
                source.className = 'drag-source';
                source.textContent = i;
                source.draggable = true;
                source.dataset.id = i;
                
                source.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text', this.dataset.id);
                    this.classList.add('dragging');
                });
                
                source.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
                
                container.appendChild(source);
            }
            
            const dropZone = document.createElement('div');
            dropZone.className = 'drop-zone';
            dropZone.textContent = translations[currentLanguage].draggingInstructions;
            dropZone.style.gridColumn = 'span 3';
            
            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });
            
            dropZone.addEventListener('dragleave', function() {
                this.classList.remove('drag-over');
            });
            
            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                const id = e.dataTransfer.getData('text');
                const source = document.querySelector(`[data-id="${id}"]`);
                
                if (source) {
                    source.remove();
                    hits++;
                    score += config.dragging.points;
                    updateStats();
                    
                    if (document.querySelectorAll('.drag-source').length === 0) {
                        endGame();
                    }
                }
            });
            
            container.appendChild(dropZone);
            gameArea.appendChild(container);
        }

        function setupWhackAMole() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const grid = document.createElement('div');
            grid.className = 'whack-grid';
            
            for (let i = 0; i < 9; i++) {
                const hole = document.createElement('div');
                hole.className = 'whack-hole';
                
                const mole = document.createElement('div');
                mole.className = 'whack-mole';
                mole.textContent = 'üêπ';
                mole.dataset.index = i;
                
                mole.addEventListener('click', function() {
                    if (this.classList.contains('up')) {
                        this.classList.add('hit');
                        hits++;
                        score += config.whack.points;
                        updateStats();
                        
                        setTimeout(() => {
                            this.classList.remove('up', 'hit');
                        }, 300);
                    }
                });
                
                hole.appendChild(mole);
                grid.appendChild(hole);
            }
            
            gameArea.appendChild(grid);
        }

        function showRandomMole() {
            const moles = document.querySelectorAll('.whack-mole');
            const availableMoles = Array.from(moles).filter(m => !m.classList.contains('up'));
            
            if (availableMoles.length > 0) {
                const randomMole = availableMoles[Math.floor(Math.random() * availableMoles.length)];
                randomMole.classList.add('up');
                
                setTimeout(() => {
                    if (randomMole.classList.contains('up') && !randomMole.classList.contains('hit')) {
                        randomMole.classList.remove('up');
                        misses++;
                        updateStats();
                    }
                }, 1500);
            }
        }

        function setupMatching() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            // Use only red, blue, green colors
            const colors = ['#f44336', '#2196F3', '#4CAF50']; // Red, Blue, Green
            const pairs = config.matching.pairs;
            // Repeat colors to match required pairs
            const colorSet = [];
            for (let i = 0; i < pairs; i++) {
                colorSet.push(colors[i % colors.length]);
            }
            const cardColors = colorSet.concat(colorSet);
            
            // Shuffle
            for (let i = cardColors.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cardColors[i], cardColors[j]] = [cardColors[j], cardColors[i]];
            }
            
            const grid = document.createElement('div');
            grid.className = 'match-grid';
            
            cardColors.forEach((color, index) => {
                const card = document.createElement('div');
                card.className = 'match-card';
                card.style.background = '#333';
                card.dataset.color = color;
                card.dataset.index = index;
                
                card.addEventListener('click', function() {
                    if (this.classList.contains('flipped') || this.classList.contains('matched')) return;
                    
                    this.classList.add('flipped');
                    this.style.background = color;
                    flippedCards.push(this);
                    
                    if (flippedCards.length === 2) {
                        checkMatch();
                    }
                });
                
                grid.appendChild(card);
            });
            
            gameArea.appendChild(grid);
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.color === card2.dataset.color) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                hits++;
                score += config.matching.points;
                updateStats();
                
                if (matchedPairs === config.matching.pairs) {
                    endGame();
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    card1.style.background = '#333';
                    card2.style.background = '#333';
                }, 1000);
                misses++;
            }
            
            flippedCards = [];
            updateStats();
        }

        function setupScrolling() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const scrollContainer = document.createElement('div');
            scrollContainer.className = 'scroll-container';
            scrollContainer.id = 'scrollContainer';
            
            const itemsToFind = config.scrolling.items;
            let scrollCount = 0;
            let lastScrollTop = 0;
            
            for (let i = 1; i <= itemsToFind; i++) {
                const item = document.createElement('div');
                item.className = 'scroll-item';
                item.textContent = translations[currentLanguage].scrollingTitle + ' ' + i;
                item.dataset.index = i;
                scrollContainer.appendChild(item);
            }
            
            // Add scroll indicator
            const indicator = document.createElement('div');
            indicator.className = 'scroll-indicator';
            indicator.id = 'scrollIndicator';
            indicator.textContent = 'Scroll: 0/' + itemsToFind;
            document.body.appendChild(indicator);
            
            scrollContainer.addEventListener('scroll', function() {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight;
                const clientHeight = this.clientHeight;
                const scrollPercent = Math.round((scrollTop / (scrollHeight - clientHeight)) * 100);
                
                // Count visible items
                const visibleItems = Array.from(this.querySelectorAll('.scroll-item')).filter(item => {
                    const rect = item.getBoundingClientRect();
                    const containerRect = this.getBoundingClientRect();
                    return rect.top >= containerRect.top && rect.bottom <= containerRect.bottom;
                }).length;
                
                if (scrollTop > lastScrollTop && scrollTop > 50) {
                    scrollCount = Math.max(scrollCount, Math.floor((scrollTop / scrollHeight) * itemsToFind));
                    if (scrollCount < itemsToFind) {
                        hits++;
                        score += config.scrolling.points;
                        updateStats();
                    }
                }
                
                lastScrollTop = scrollTop;
                document.getElementById('scrollIndicator').textContent = 
                    translations[currentLanguage].scrollingTitle + ': ' + Math.min(scrollCount + 1, itemsToFind) + '/' + itemsToFind;
            });
            
            gameArea.appendChild(scrollContainer);
        }

        function setupRightClick() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            // Prevent default context menu
            gameArea.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            createRightClickTarget();
            
            gameInterval = setInterval(() => {
                if (!isPaused && timeRemaining > 0) {
                    createRightClickTarget();
                }
            }, config.rightclick.spawnRate);
        }

        function createRightClickTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'rightclick-target';
            target.textContent = 'üñ±Ô∏è';
            
            const maxX = gameArea.offsetWidth - 100;
            const maxY = gameArea.offsetHeight - 100;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            target.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                this.classList.add('clicked');
                hits++;
                score += config.rightclick.points;
                updateStats();
                
                setTimeout(() => {
                    this.remove();
                }, 300);
            });
            
            // Also remove on left click (miss)
            target.addEventListener('click', function(e) {
                e.preventDefault();
                misses++;
                updateStats();
                this.remove();
            });
            
            gameArea.appendChild(target);
            
            // Auto-remove after 4 seconds if not clicked
            setTimeout(() => {
                if (target.parentNode) {
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 4000);
        }

        // ========== BASIC GAMES ==========
        
        function setupBubblePop() {
            // Game starts automatically via startGame()
        }

        function createBubble() {
            const gameArea = document.getElementById('gameArea');
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            const colors = ['#f44336', '#2196F3', '#4CAF50', '#FF9800', '#9C27B0', '#00BCD4'];
            const emojis = ['ü´ß', 'üíß', 'üéà', '‚ö™', 'üîµ', 'üü¢'];
            const colorIndex = Math.floor(Math.random() * colors.length);
            
            bubble.style.background = colors[colorIndex];
            bubble.textContent = emojis[colorIndex];
            
            const maxX = gameArea.offsetWidth - 60;
            const maxY = gameArea.offsetHeight - 60;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            bubble.style.left = x + 'px';
            bubble.style.top = y + 'px';
            
            bubble.addEventListener('click', function() {
                this.classList.add('popped');
                hits++;
                score += config.games.bubblepop.points;
                updateStats();
                
                setTimeout(() => this.remove(), 400);
            });
            
            gameArea.appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    misses++;
                    updateStats();
                    bubble.remove();
                }
            }, 4000);
        }

        function setupSimpleClick() {
            targetCount = 0;
        }

        function createSimpleTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'simple-target';
            target.textContent = targetCount + 1;
            
            const maxX = gameArea.offsetWidth - 100;
            const maxY = gameArea.offsetHeight - 100;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            target.addEventListener('click', function() {
                this.style.animation = 'clickAnimation 0.3s';
                hits++;
                targetCount++;
                score += config.games.simpleclick.points;
                updateStats();
                
                setTimeout(() => {
                    this.remove();
                    if (targetCount >= config.games.simpleclick.targets) {
                        endGame();
                    }
                }, 300);
            });
            
            gameArea.appendChild(target);
        }

        function setupColorFill() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const container = document.createElement('div');
            container.style.display = 'flex';
            container.style.flexWrap = 'wrap';
            container.style.justifyContent = 'center';
            container.style.alignItems = 'center';
            container.style.padding = '20px';
            container.style.height = '100%';
            container.style.gap = '20px';
            
            const colors = ['#f44336', '#2196F3', '#4CAF50']; // Red, Blue, Green
            const shapes = ['üî¥', 'üîµ', 'üü¢'];
            const shapesToFill = config.games.colorfill.shapes;
            
            for (let i = 0; i < shapesToFill; i++) {
                const shape = document.createElement('div');
                shape.className = 'color-shape';
                shape.textContent = shapes[i % 3];
                shape.dataset.color = colors[i % 3];
                shape.dataset.filled = 'false';
                
                shape.addEventListener('click', function() {
                    if (this.dataset.filled === 'true') return;
                    
                    this.style.background = this.dataset.color;
                    this.classList.add('filled');
                    this.dataset.filled = 'true';
                    hits++;
                    score += config.games.colorfill.points;
                    updateStats();
                    
                    const allFilled = Array.from(container.querySelectorAll('.color-shape')).every(s => s.dataset.filled === 'true');
                    if (allFilled) {
                        setTimeout(() => endGame(), 500);
                    }
                });
                
                container.appendChild(shape);
            }
            
            gameArea.appendChild(container);
        }

        // ========== MEDIUM GAMES ==========
        
        function setupMovingTargets() {
            // Game starts automatically via startGame()
        }

        function createMovingTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'moving-target';
            target.textContent = 'üéØ';
            
            const maxX = gameArea.offsetWidth - 70;
            const maxY = gameArea.offsetHeight - 70;
            let x = Math.random() * maxX;
            let y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            const speed = config.games.movingtargets.speed;
            let dx = (Math.random() - 0.5) * speed;
            let dy = (Math.random() - 0.5) * speed;
            
            target.addEventListener('click', function() {
                this.style.animation = 'hitAnimation 0.4s';
                hits++;
                score += config.games.movingtargets.points;
                updateStats();
                
                setTimeout(() => this.remove(), 400);
            });
            
            const moveInterval = setInterval(() => {
                if (!target.parentNode || isPaused) {
                    clearInterval(moveInterval);
                    return;
                }
                
                x += dx;
                y += dy;
                
                if (x <= 0 || x >= maxX) dx = -dx;
                if (y <= 0 || y >= maxY) dy = -dy;
                
                target.style.left = x + 'px';
                target.style.top = y + 'px';
            }, 50);
            
            gameArea.appendChild(target);
            movingTargets.push({ element: target, interval: moveInterval });
            
            setTimeout(() => {
                if (target.parentNode) {
                    clearInterval(moveInterval);
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 3000);
        }

        function setupDoubleClick() {
            lastClickTime = 0;
        }

        function createDoubleClickTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'doubleclick-target';
            target.textContent = 'üëÜüëÜ';
            
            const maxX = gameArea.offsetWidth - 80;
            const maxY = gameArea.offsetHeight - 80;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            let clickCount = 0;
            
            target.addEventListener('click', function() {
                const now = Date.now();
                clickCount++;
                
                if (clickCount === 1) {
                    this.textContent = '‚úì';
                    setTimeout(() => {
                        if (clickCount === 1) {
                            clickCount = 0;
                            this.textContent = 'üëÜüëÜ';
                        }
                    }, 500);
                } else if (clickCount === 2 && now - lastClickTime < 500) {
                    this.style.animation = 'clickAnimation 0.3s';
                    hits++;
                    score += config.games.doubleclick.points;
                    updateStats();
                    
                    setTimeout(() => this.remove(), 300);
                }
                
                lastClickTime = now;
            });
            
            gameArea.appendChild(target);
            
            setTimeout(() => {
                if (target.parentNode) {
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 3000);
        }

        function setupShapeMatch() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const shapes = ['üî∑', 'üî∂', 'üî∏', 'üîπ', '‚¨õ', '‚¨ú', 'üî¥', 'üîµ'];
            const pairs = config.games.shapematch.pairs;
            const shapeSet = shapes.slice(0, pairs).concat(shapes.slice(0, pairs));
            
            // Shuffle
            for (let i = shapeSet.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shapeSet[i], shapeSet[j]] = [shapeSet[j], shapeSet[i]];
            }
            
            const container = document.createElement('div');
            container.style.display = 'grid';
            container.style.gridTemplateColumns = 'repeat(4, 1fr)';
            container.style.gap = '15px';
            container.style.padding = '20px';
            container.style.height = '100%';
            
            shapeSet.forEach((shape, index) => {
                const card = document.createElement('div');
                card.className = 'shape-card';
                card.textContent = shape;
                card.dataset.shape = shape;
                card.dataset.index = index;
                
                card.addEventListener('click', function() {
                    if (this.classList.contains('selected') || this.classList.contains('matched')) return;
                    
                    this.classList.add('selected');
                    selectedShapes.push(this);
                    
                    if (selectedShapes.length === 2) {
                        checkShapeMatch();
                    }
                });
                
                container.appendChild(card);
            });
            
            gameArea.appendChild(container);
        }

        function checkShapeMatch() {
            const [card1, card2] = selectedShapes;
            
            if (card1.dataset.shape === card2.dataset.shape) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                hits++;
                score += config.games.shapematch.points;
                updateStats();
                
                if (matchedPairs === config.games.shapematch.pairs) {
                    setTimeout(() => endGame(), 500);
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('selected');
                    card2.classList.remove('selected');
                }, 1000);
                misses++;
            }
            
            selectedShapes = [];
            updateStats();
        }

        // ========== HARD GAMES ==========
        
        function setupKnifeThrow() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const container = document.createElement('div');
            container.className = 'knife-game-container';
            container.style.width = '100%';
            container.style.height = '100%';
            container.style.position = 'relative';
            container.style.display = 'flex';
            container.style.alignItems = 'center';
            container.style.justifyContent = 'center';
            
            const centerX = gameArea.offsetWidth / 2;
            const centerY = gameArea.offsetHeight / 2;
            const radius = Math.min(centerX, centerY) - 80;
            
            const fruits = ['üçé', 'üçä', 'üçå', 'üçá', 'üçì', 'ü•ù', 'üçë', 'üçâ'];
            const fruitCount = config.games.knifethrow.fruits;
            const rotationSpeed = config.games.knifethrow.rotationSpeed;
            
            let fruitElements = [];
            let knives = [];
            let currentRotation = 0;
            let gameOver = false;
            
            // Create rotating fruits
            for (let i = 0; i < fruitCount; i++) {
                const fruit = document.createElement('div');
                fruit.className = 'rotating-fruit';
                fruit.innerHTML = fruits[i % fruits.length];
                fruit.style.position = 'absolute';
                fruit.style.width = '60px';
                fruit.style.height = '60px';
                fruit.style.fontSize = '3em';
                fruit.style.display = 'flex';
                fruit.style.alignItems = 'center';
                fruit.style.justifyContent = 'center';
                fruit.style.cursor = 'pointer';
                fruit.dataset.index = i;
                fruit.dataset.cut = 'false';
                
                const angle = (i / fruitCount) * Math.PI * 2;
                fruit.style.left = (centerX + Math.cos(angle) * radius - 30) + 'px';
                fruit.style.top = (centerY + Math.sin(angle) * radius - 30) + 'px';
                
                fruitElements.push(fruit);
                container.appendChild(fruit);
            }
            
            // Rotation animation
            const rotateInterval = setInterval(() => {
                if (isPaused || gameOver || timeRemaining <= 0) return;
                
                currentRotation += rotationSpeed;
                
                fruitElements.forEach((fruit, index) => {
                    if (fruit.dataset.cut === 'true') return;
                    
                    const angle = (index / fruitCount) * Math.PI * 2 + (currentRotation * Math.PI / 180);
                    fruit.style.left = (centerX + Math.cos(angle) * radius - 30) + 'px';
                    fruit.style.top = (centerY + Math.sin(angle) * radius - 30) + 'px';
                });
            }, 16);
            
            // Click to throw knife
            container.addEventListener('click', function throwKnife(e) {
                if (gameOver || isPaused || timeRemaining <= 0) return;
                
                const rect = container.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const clickY = e.clientY - rect.top;
                
                // Create knife at center
                const knife = document.createElement('div');
                knife.className = 'thrown-knife';
                knife.innerHTML = 'üî™';
                knife.style.position = 'absolute';
                knife.style.width = '40px';
                knife.style.height = '40px';
                knife.style.fontSize = '2em';
                knife.style.left = (centerX - 20) + 'px';
                knife.style.top = (centerY - 20) + 'px';
                knife.style.zIndex = '100';
                knife.style.display = 'flex';
                knife.style.alignItems = 'center';
                knife.style.justifyContent = 'center';
                
                const dx = clickX - centerX;
                const dy = clickY - centerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx);
                
                knife.style.transform = `rotate(${angle * 180 / Math.PI}deg)`;
                knife.dataset.angle = angle;
                knife.dataset.distance = distance;
                
                container.appendChild(knife);
                knives.push(knife);
                
                // Animate knife throw
                knife.style.transition = 'all 0.3s ease-out';
                setTimeout(() => {
                    knife.style.left = (clickX - 20) + 'px';
                    knife.style.top = (clickY - 20) + 'px';
                    
                    // Check collision with fruits
                    setTimeout(() => {
                        let fruitHit = false;
                        fruitElements.forEach(fruit => {
                            if (fruit.dataset.cut === 'true') return;
                            
                            const fruitRect = fruit.getBoundingClientRect();
                            const fruitX = fruitRect.left + fruitRect.width / 2 - rect.left;
                            const fruitY = fruitRect.top + fruitRect.height / 2 - rect.top;
                            
                            const dist = Math.sqrt(Math.pow(clickX - fruitX, 2) + Math.pow(clickY - fruitY, 2));
                            
                            if (dist < 40) {
                                fruitHit = true;
                                fruit.dataset.cut = 'true';
                                fruit.style.opacity = '0.3';
                                fruit.style.transform = 'scale(0.5)';
                                hits++;
                                score += config.games.knifethrow.points;
                                updateStats();
                            }
                        });
                        
                        if (!fruitHit) {
                            misses++;
                            updateStats();
                        }
                        
                        // Check knife overlap
                        if (knives.length > 1) {
                            for (let i = 0; i < knives.length; i++) {
                                for (let j = i + 1; j < knives.length; j++) {
                                    const k1 = knives[i];
                                    const k2 = knives[j];
                                    
                                    if (!k1.parentNode || !k2.parentNode) continue;
                                    
                                    const k1Rect = k1.getBoundingClientRect();
                                    const k2Rect = k2.getBoundingClientRect();
                                    
                                    const k1X = k1Rect.left + k1Rect.width / 2 - rect.left;
                                    const k1Y = k1Rect.top + k1Rect.height / 2 - rect.top;
                                    const k2X = k2Rect.left + k2Rect.width / 2 - rect.left;
                                    const k2Y = k2Rect.top + k2Rect.height / 2 - rect.top;
                                    
                                    const dist = Math.sqrt(Math.pow(k1X - k2X, 2) + Math.pow(k1Y - k2Y, 2));
                                    
                                    if (dist < 35) {
                                        // Knives overlap - game over!
                                        gameOver = true;
                                        clearInterval(rotateInterval);
                                        
                                        k1.style.animation = 'knifeShake 0.5s';
                                        k2.style.animation = 'knifeShake 0.5s';
                                        
                                        setTimeout(() => {
                                            endGame();
                                        }, 1000);
                                        return;
                                    }
                                }
                            }
                        }
                    }, 300);
                }, 10);
            });
            
            gameArea.appendChild(container);
        }

        function setupNeedleThrow() {
            // Game starts automatically via startGame()
        }

        function createNeedleTarget() {
            const gameArea = document.getElementById('gameArea');
            const target = document.createElement('div');
            target.className = 'needle-target';
            target.innerHTML = '‚óè';
            
            const maxX = gameArea.offsetWidth - 30;
            const maxY = gameArea.offsetHeight - 30;
            const x = Math.random() * maxX;
            const y = Math.random() * maxY;
            
            target.style.left = x + 'px';
            target.style.top = y + 'px';
            
            let needleThrown = false;
            
            gameArea.addEventListener('click', function throwNeedle(e) {
                if (needleThrown || !target.parentNode || isPaused) return;
                
                const rect = gameArea.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const clickY = e.clientY - rect.top;
                
                const targetRect = target.getBoundingClientRect();
                const targetCenterX = targetRect.left + targetRect.width / 2 - rect.left;
                const targetCenterY = targetRect.top + targetRect.height / 2 - rect.top;
                
                const distance = Math.sqrt(Math.pow(clickX - targetCenterX, 2) + Math.pow(clickY - targetCenterY, 2));
                
                if (distance < 20) {
                    needleThrown = true;
                    
                    // Create needle animation
                    const needle = document.createElement('div');
                    needle.className = 'needle';
                    needle.innerHTML = 'üìå';
                    needle.style.left = clickX - 10 + 'px';
                    needle.style.top = clickY - 10 + 'px';
                    gameArea.appendChild(needle);
                    
                    const dx = targetCenterX - clickX;
                    const dy = targetCenterY - clickY;
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    needle.style.transform = `rotate(${angle}deg)`;
                    needle.style.transition = 'all 0.2s ease-out';
                    
                    setTimeout(() => {
                        needle.style.left = targetCenterX - 10 + 'px';
                        needle.style.top = targetCenterY - 10 + 'px';
                        
                        setTimeout(() => {
                            target.classList.add('hit');
                            needle.remove();
                            hits++;
                            score += config.games.needlethrow.points;
                            updateStats();
                            
                            setTimeout(() => {
                                target.remove();
                                gameArea.removeEventListener('click', throwNeedle);
                            }, 300);
                        }, 200);
                    }, 10);
                } else {
                    misses++;
                    updateStats();
                }
            });
            
            gameArea.appendChild(target);
            
            setTimeout(() => {
                if (target.parentNode) {
                    gameArea.removeEventListener('click', function throwNeedle() {});
                    misses++;
                    updateStats();
                    target.remove();
                }
            }, 3000);
        }

        function setupCarromAim() {
            const gameArea = document.getElementById('gameArea');
            gameArea.innerHTML = '';
            
            const board = document.createElement('div');
            board.className = 'carrom-board';
            board.id = 'carromBoard';
            
            // Create carrom board background
            board.style.width = '100%';
            board.style.height = '100%';
            board.style.background = 'linear-gradient(135deg, #8B4513 0%, #A0522D 100%)';
            board.style.borderRadius = '20px';
            board.style.position = 'relative';
            board.style.border = '10px solid #654321';
            
            // Create pockets (corners)
            const pocketSize = 40;
            const positions = [
                { x: 0, y: 0 },
                { x: '100%', y: 0 },
                { x: 0, y: '100%' },
                { x: '100%', y: '100%' }
            ];
            
            positions.forEach((pos, index) => {
                const pocket = document.createElement('div');
                pocket.className = 'carrom-pocket';
                pocket.style.position = 'absolute';
                pocket.style.width = pocketSize + 'px';
                pocket.style.height = pocketSize + 'px';
                pocket.style.background = '#000';
                pocket.style.borderRadius = '50%';
                pocket.style.left = pos.x === 0 ? '0' : `calc(${pos.x} - ${pocketSize}px)`;
                pocket.style.top = pos.y === 0 ? '0' : `calc(${pos.y} - ${pocketSize}px)`;
                pocket.dataset.index = index;
                board.appendChild(pocket);
            });
            
            // Create instruction overlay
            const instruction = document.createElement('div');
            instruction.className = 'carrom-instruction';
            instruction.id = 'carromInstruction';
            instruction.textContent = translations[currentLanguage].carromaimInstructions;
            board.appendChild(instruction);
            
            // Create shots counter
            const shotsCounter = document.createElement('div');
            shotsCounter.className = 'shots-counter';
            shotsCounter.id = 'shotsCounter';
            board.appendChild(shotsCounter);
            
            // Create power indicator
            const powerIndicator = document.createElement('div');
            powerIndicator.className = 'power-indicator';
            powerIndicator.id = 'powerIndicator';
            powerIndicator.innerHTML = '<div>Power</div><div class="power-bar"><div class="power-fill" id="powerFill"></div></div>';
            board.appendChild(powerIndicator);
            
            // Create striker (player piece)
            const striker = document.createElement('div');
            striker.className = 'carrom-striker';
            striker.id = 'carromStriker';
            striker.innerHTML = '‚ö™';
            striker.style.position = 'absolute';
            striker.style.width = '55px';
            striker.style.height = '55px';
            striker.style.background = 'linear-gradient(135deg, #fff 0%, #e0e0e0 100%)';
            striker.style.borderRadius = '50%';
            striker.style.left = '50%';
            striker.style.top = '88%';
            striker.style.transform = 'translate(-50%, -50%)';
            striker.style.display = 'flex';
            striker.style.alignItems = 'center';
            striker.style.justifyContent = 'center';
            striker.style.fontSize = '2.2em';
            striker.style.zIndex = '10';
            board.appendChild(striker);
            
            // Create aim line and arrow
            const aimLine = document.createElement('div');
            aimLine.className = 'aim-line';
            aimLine.id = 'aimLine';
            aimLine.style.display = 'none';
            board.appendChild(aimLine);
            
            const aimArrow = document.createElement('div');
            aimArrow.className = 'aim-arrow';
            aimArrow.id = 'aimArrow';
            aimArrow.style.display = 'none';
            board.appendChild(aimArrow);
            
            // Create carrom pieces
            const pieces = [];
            const pieceCount = 9;
            
            setTimeout(() => {
                const centerX = board.offsetWidth / 2;
                const centerY = board.offsetHeight / 2;
                
                for (let i = 0; i < pieceCount; i++) {
                    const piece = document.createElement('div');
                    piece.className = 'carrom-piece';
                    piece.innerHTML = '‚ö´';
                    piece.style.position = 'absolute';
                    piece.style.width = '35px';
                    piece.style.height = '35px';
                    piece.style.background = '#000';
                    piece.style.borderRadius = '50%';
                    piece.style.display = 'flex';
                    piece.style.alignItems = 'center';
                    piece.style.justifyContent = 'center';
                    piece.style.fontSize = '1.5em';
                    piece.style.cursor = 'pointer';
                    
                    const angle = (i / pieceCount) * Math.PI * 2;
                    const radius = 80;
                    const x = centerX + Math.cos(angle) * radius - 17.5;
                    const y = centerY + Math.sin(angle) * radius - 17.5;
                    
                    piece.style.left = x + 'px';
                    piece.style.top = y + 'px';
                    piece.dataset.index = i;
                    pieces.push(piece);
                    board.appendChild(piece);
                }
            }, 100);
            
            let shotsRemaining = config.games.carromaim.shots;
            let isAiming = false;
            let strikerX = 0;
            let strikerY = 0;
            
            // Update shots counter
            function updateShotsCounter() {
                shotsCounter.textContent = `Shots: ${shotsRemaining}`;
            }
            updateShotsCounter();
            
            // Hide instruction after 3 seconds
            setTimeout(() => {
                instruction.style.opacity = '0';
                setTimeout(() => instruction.style.display = 'none', 500);
            }, 3000);
            
            // Striker click to aim
            striker.addEventListener('mousedown', function(e) {
                if (shotsRemaining <= 0 || isPaused) return;
                e.stopPropagation();
                isAiming = true;
                striker.classList.add('aiming');
                
                const rect = board.getBoundingClientRect();
                const strikerRect = striker.getBoundingClientRect();
                strikerX = strikerRect.left + strikerRect.width / 2 - rect.left;
                strikerY = strikerRect.top + strikerRect.height / 2 - rect.top;
                
                // Show power indicator
                powerIndicator.classList.add('active');
                aimLine.style.display = 'block';
                aimArrow.style.display = 'block';
            });
            
            board.addEventListener('mousemove', function(e) {
                if (!isAiming || shotsRemaining <= 0 || isPaused) return;
                
                const rect = board.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                const dx = mouseX - strikerX;
                const dy = mouseY - strikerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const angle = Math.atan2(dy, dx);
                
                // Limit aim distance
                const maxDistance = 150;
                const limitedDistance = Math.min(distance, maxDistance);
                const limitedX = strikerX + Math.cos(angle) * limitedDistance;
                const limitedY = strikerY + Math.sin(angle) * limitedDistance;
                
                // Update aim line
                aimLine.style.left = strikerX + 'px';
                aimLine.style.top = strikerY + 'px';
                aimLine.style.width = limitedDistance + 'px';
                aimLine.style.transform = `rotate(${angle}rad)`;
                
                // Update aim arrow
                aimArrow.style.left = (limitedX - 7.5) + 'px';
                aimArrow.style.top = (limitedY - 8) + 'px';
                aimArrow.style.transform = `rotate(${angle}rad)`;
                
                // Update power indicator
                const powerPercent = Math.min((limitedDistance / maxDistance) * 100, 100);
                document.getElementById('powerFill').style.width = powerPercent + '%';
                
                // Rotate striker
                striker.style.transform = `translate(-50%, -50%) rotate(${angle * 180 / Math.PI}deg)`;
            });
            
            board.addEventListener('mouseup', function(e) {
                if (!isAiming || shotsRemaining <= 0 || isPaused) return;
                isAiming = false;
                striker.classList.remove('aiming');
                
                const rect = board.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                const dx = mouseX - strikerX;
                const dy = mouseY - strikerY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // Hide aim indicators
                powerIndicator.classList.remove('active');
                aimLine.style.display = 'none';
                aimArrow.style.display = 'none';
                
                if (distance > 30) {
                    // Strike!
                    shotsRemaining--;
                    updateShotsCounter();
                    
                    const maxDistance = 150;
                    const power = Math.min(distance / maxDistance, 1);
                    const speed = power * 0.4;
                    
                    // Move striker
                    striker.style.transition = 'all 0.4s ease-out';
                    striker.style.left = (strikerX + dx * speed) + 'px';
                    striker.style.top = (strikerY + dy * speed) + 'px';
                    
                    // Check if pieces are hit
                    setTimeout(() => {
                        const allPieces = board.querySelectorAll('.carrom-piece');
                        allPieces.forEach(piece => {
                            if (!piece.parentNode) return;
                            
                            const pieceRect = piece.getBoundingClientRect();
                            const pieceX = pieceRect.left + pieceRect.width / 2 - rect.left;
                            const pieceY = pieceRect.top + pieceRect.height / 2 - rect.top;
                            
                            const distToStriker = Math.sqrt(Math.pow(strikerX - pieceX, 2) + Math.pow(strikerY - pieceY, 2));
                            
                            if (distToStriker < 60) {
                                // Piece hit - move towards nearest pocket
                                const pockets = board.querySelectorAll('.carrom-pocket');
                                let nearestPocket = null;
                                let minDist = Infinity;
                                
                                pockets.forEach(p => {
                                    const pRect = p.getBoundingClientRect();
                                    const pX = pRect.left + pRect.width / 2 - rect.left;
                                    const pY = pRect.top + pRect.height / 2 - rect.top;
                                    
                                    const dist = Math.sqrt(Math.pow(pieceX - pX, 2) + Math.pow(pieceY - pY, 2));
                                    
                                    if (dist < minDist) {
                                        minDist = dist;
                                        nearestPocket = p;
                                    }
                                });
                                
                                if (nearestPocket) {
                                    const pocketRect = nearestPocket.getBoundingClientRect();
                                    const pocketX = pocketRect.left + pocketRect.width / 2 - rect.left;
                                    const pocketY = pocketRect.top + pocketRect.height / 2 - rect.top;
                                    
                                    piece.style.transition = 'all 0.7s ease-out';
                                    piece.style.left = pocketX - 19 + 'px';
                                    piece.style.top = pocketY - 19 + 'px';
                                    piece.style.opacity = '0.5';
                                    
                                    setTimeout(() => {
                                        if (piece.parentNode) {
                                            piece.remove();
                                            hits++;
                                            score += config.games.carromaim.points;
                                            updateStats();
                                            
                                            const remainingPieces = board.querySelectorAll('.carrom-piece').length;
                                            if (remainingPieces === 0 || shotsRemaining === 0) {
                                                setTimeout(() => endGame(), 1000);
                                            }
                                        }
                                    }, 700);
                                }
                            }
                        });
                    }, 50);
                    
                    // Reset striker position
                    setTimeout(() => {
                        striker.style.transition = 'all 0.4s ease-out';
                        striker.style.left = '50%';
                        striker.style.top = '88%';
                        striker.style.transform = 'translate(-50%, -50%)';
                        
                        // Update striker position
                        setTimeout(() => {
                            const strikerRect = striker.getBoundingClientRect();
                            strikerX = strikerRect.left + strikerRect.width / 2 - board.getBoundingClientRect().left;
                            strikerY = strikerRect.top + strikerRect.height / 2 - board.getBoundingClientRect().top;
                        }, 400);
                    }, 400);
                }
            });
            
            // Initialize striker position
            setTimeout(() => {
                const strikerRect = striker.getBoundingClientRect();
                const rect = board.getBoundingClientRect();
                strikerX = strikerRect.left + strikerRect.width / 2 - rect.left;
                strikerY = strikerRect.top + strikerRect.height / 2 - rect.top;
            }, 200);
            
            gameArea.appendChild(board);
        }

        function updateStats() {
            const accuracy = (hits + misses) > 0 ? Math.round((hits / (hits + misses)) * 100) : 100;
            document.getElementById('score').textContent = score;
            document.getElementById('hits').textContent = hits;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        function pausePractice() {
            isPaused = !isPaused;
            const btn = document.getElementById('pauseBtn');
            const t = translations[currentLanguage];
            btn.textContent = isPaused ? '‚ñ∂Ô∏è ' + t.resumeBtn : '‚è∏Ô∏è ' + t.pauseBtn;
        }

        function resetPractice() {
            score = 0;
            hits = 0;
            misses = 0;
            timeRemaining = 0;
            isPaused = false;
            flippedCards = [];
            matchedPairs = 0;
            targetCount = 0;
            selectedShapes = [];
            multiClickSequence = [];
            mazeCompleted = false;
            
            // Clear all moving targets
            movingTargets.forEach(item => {
                if (item.interval) clearInterval(item.interval);
                if (item.element && item.element.parentNode) {
                    item.element.remove();
                }
            });
            movingTargets = [];
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            if (gameInterval) {
                clearInterval(gameInterval);
                gameInterval = null;
            }
            
            if (doubleClickTimeout) {
                clearTimeout(doubleClickTimeout);
                doubleClickTimeout = null;
            }
            
            // Remove scroll indicator if exists
            const indicator = document.getElementById('scrollIndicator');
            if (indicator) {
                indicator.remove();
            }
            
            document.getElementById('timerDisplay').classList.remove('warning');
            updateStats();
        }

        function endGame() {
            if (timerInterval) clearInterval(timerInterval);
            if (gameInterval) clearInterval(gameInterval);
            
            const t = translations[currentLanguage];
            const accuracy = (hits + misses) > 0 ? Math.round((hits / (hits + misses)) * 100) : 100;
            
            document.getElementById('resultTitle').textContent = t.timesUp;
            document.getElementById('resultStats').innerHTML = `
                <div><strong>${t.finalScore}</strong> ${score}</div>
                <div><strong>${t.finalHits}</strong> ${hits}</div>
                <div><strong>${t.finalAccuracy}</strong> ${accuracy}%</div>
            `;
            
            document.getElementById('resultModal').classList.add('active');
        }

        function closeResultModal() {
            document.getElementById('resultModal').classList.remove('active');
            goBack();
        }

        function goBack() {
            document.getElementById('practiceArea').classList.remove('active');
            if (currentDifficulty) {
                document.getElementById('categorySelector').style.display = 'grid';
            } else {
                document.getElementById('difficultySelector').style.display = 'grid';
            }
            resetPractice();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setLanguage(currentLanguage);
        });
    </script>
</body>
</html>
